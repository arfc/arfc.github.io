I"ˇ"<p><a href="https://bluewaters.ncsa.illinois.edu/getting-started">Read this page first</a></p>

<h2 id="step-0-get-a-license-for-serpent">Step 0. Get a license for Serpent</h2>
<p>Register for Serpent through RSICC and deposit your license documentation in 
the Google Drive software licenses directory.</p>

<h2 id="step-1-communication">Step 1. Communication</h2>
<p>Have Prof Huff get you approved for Blue Waters!</p>

<h2 id="step-2-apply-for-blue-waters">Step 2. Apply for Blue Waters</h2>
<p>You should recieve an email with a link to continue your validation process.
Follow the link and fill out the application.
        You can either receive a virtual token or a physical token.
        A Virutal token is done through your mobile device,
        and a physical token looks like this:</p>

<p><img src="/img/manual/guides/bw-token.jpg" alt="alt text" /></p>

<p>Or, if you chose a soft token, install the RSA SecurID app and 
follow the instruction sent to you by email.</p>

<h2 id="step-3-wait">Step 3. Wait</h2>
<p>Wait patiently for the token to arrive.</p>

<h2 id="step-4-activating-token">Step 4. Activating Token</h2>
<p>For activating the token, instructions should be contained within the emails recieved. Extra information can be found <a href="https://wiki.ncsa.illinois.edu/display/cybersec/Duo+at+NCSA">here</a>.</p>

<h2 id="step-5-logging-in">Step 5. Logging In</h2>
<p>Open terminal, type</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ssh [username]@h2ologin.ncsa.illinois.edu
</code></pre></div></div>
<p>You will then be prompted for your password, followed by an option to select from a list of your 
registered tokens. After selecting the token you will use (if you only have one token, simply 
type 1), either enter your pin and token number or approve the login request with Duo, 
depending on what token type you are using.</p>

<h4 id="tip-you-can-shortname-your-ssh-command">tip) you can shortname your ssh command:</h4>
<p>Open the terminal</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$cd
$cd .ssh
$vim config
</code></pre></div></div>

<p>write:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        Host [desired_name]
        HostName h2ologin.ncsa.illinois.edu
        User [Blue_Waters_User_Name] 
</code></pre></div></div>

<p>Then you‚Äôd just have to type in</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ssh [desired_name]
</code></pre></div></div>

<p>For example, you might have named Blue Waters ‚Äúbw‚Äù.
In that case, you simply type</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ssh bw
</code></pre></div></div>

<h2 id="step-6-congratz">Step 6. Congratz!</h2>
<p>You‚Äôre in! :)</p>

<p><img src="/img/manual/guides/bw-welcome.png" alt="alt text" /></p>

<h4 id="tip-running-jobs">tip) running jobs</h4>
<p>To start running jobs on Blue Waters, it is useful to look at what other people use as well as the documentation:</p>
<ol>
  <li>Create a [file_name].pbs script (which contains an aprun command).
 A good way to find example job scripts is to search through the arfc repo for code containing ‚Äú.pbs‚Äù.
 More information can be found <a href="https://bluewaters.ncsa.illinois.edu/running-your-jobs">here</a> to understand how these job scripts function.</li>
  <li>Use qsub [file_name].pbs to submit the job.</li>
</ol>

<h2 id="step-7-module-loading">Step 7. Module Loading</h2>
<p>Various modules can be loaded and the available modules can be listed using the following commands:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Command</th>
      <th style="text-align: left">Suffix</th>
      <th style="text-align: right">Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">module avail </code></td>
      <td style="text-align: left">¬†</td>
      <td style="text-align: right">List all available modules</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">module avail </code></td>
      <td style="text-align: left">` |grep -r [keyword] `</td>
      <td style="text-align: right">Search module with keywords</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">module load </code></td>
      <td style="text-align: left">¬†</td>
      <td style="text-align: right">Load module onto environment</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">module swap </code></td>
      <td style="text-align: left">` [original] [new] `</td>
      <td style="text-align: right">replace [orignal] with [new]</td>
    </tr>
  </tbody>
</table>

<h4 id="tip-bashrc">tip) ~/.bashrc</h4>
<p>If you don‚Äôt want to load your modules every time, edit ~/.bashrc 
and have all your ‚Äòmodule load/swap‚Äô commands.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$vim ~/.bashrc
</code></pre></div></div>
<p>after editing the bashrc, you must source it:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$source ~/.bashrc
</code></pre></div></div>

<h2 id="the-group-directory">The Group Directory</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/projects/sciteam/bbcc
</code></pre></div></div>

<h2 id="how-to-download-source-code">How to Download Source Code</h2>
<p>Because Blue Waters is an HPC machine, it does
not have a package manager (like Ubuntu‚Äôs apt-get).
This is the reason why one has to build from source.</p>

<p>Also, one does not have sudo, which means that
the packages should be built either in your
home directory(~) or in the group directory (bahg)</p>

<p>Get source codes by:</p>

<ol>
  <li>
    <p>Github</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone [clone_link]
</code></pre></div>    </div>
  </li>
  <li>
    <p>wget</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget [link to source code tar.xz or zip file]
</code></pre></div>    </div>

    <p>Expand the archive with the tar or the unzip command.</p>
  </li>
</ol>

<h2 id="using-moltres">Using Moltres</h2>
<p>Navigate to</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> /projects/sciteam/bbcc/projects/
</code></pre></div></div>
<p>and read the readme file located there. It provides useful information to properly setup a pbs script and run Moltres.</p>

<h2 id="using-serpent">Using Serpent</h2>
<p>To use Serpent, one can use the command</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> qsub serpent_pbs_script.pbs
</code></pre></div></div>

<p>where an example of a pbs script for using Serpent can be seen below.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> #!/bin/bash
 #PBS -l nodes=4:ppn=32:xe
 #PBS -l walltime=08:00:00
 #PBS -N name_of_Serpent_run
 #PBS -j oe
 #PBS -q normal

 module swap PrgEnv-cray PrgEnv-gnu

 export OMP_NUM_THREADS=32

 cd $PBS_O_WORKDIR
 aprun -n 4 -d 32 /projects/sciteam/bbcc/serpent/src2.1.32/sss2 -omp 32 ./serpent_file &gt; output_file
</code></pre></div></div>

<p>Step 6 contains a link for more information on pbs scripts. The ‚Äúmodule swap‚Äù is required in order to run Serpent since it uses the gnu compiler. The ‚Äúexport‚Äù line is used to set the thread count which has a default value of 1.</p>

<h4 id="tip-cross-sections">Tip) Cross Sections</h4>
<p>When making your Serpent input deck, you can use the following for your cross section data</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set acelib "/projects/sciteam/bbcc/serpent/xsdata/jeff312/sss_jeff312.xsdata"
set declib "/projects/sciteam/bbcc/serpent/xsdata/jeff312/sss_jeff33.dec"
set nfylib "/projects/sciteam/bbcc/serpent/xsdata/jeff312/sss_jeff33.nfy"
</code></pre></div></div>

<h4 id="tip-viewing-progress">Tip) Viewing Progress</h4>

<p>While you wait for your script to complete, you can run the command</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> qstat | grep "name_of_Serpent_run"
</code></pre></div></div>

<p>which will display how long your script has been running. Once your script is done running, it should return nothing (unless someone else is running a script with the same name as yours).</p>
:ET